<!-- tab3.html -->
<div id="ecrf-wrap" style="display: flex; height: 100%; font-family: 'Noto Sans KR', sans-serif;">
  <!-- 좌측 네비게이션 -->
  <aside style="width: 240px; background: #f8f9fa; border-right: 1.5px solid #dee2e6; padding: 20px 0;">
    <nav style="display: flex; flex-direction: column; gap: 8px;">
      <button class="ecrf-tab-btn" data-tab="tab-patient">피험자 정보</button>
      <button class="ecrf-tab-btn" data-tab="tab-eval">수술 전 평가</button>
      <button class="ecrf-tab-btn" data-tab="tab-surgery">수술 정보</button>
      <button class="ecrf-tab-btn" data-tab="tab-lab">수술 후 혈액검사</button>
      <button class="ecrf-tab-btn" data-tab="tab-complication">합병증</button>
      <button class="ecrf-tab-btn" data-tab="tab-outcome">수술 후 경과</button>
    </nav>
  </aside>

  <!-- 우측 콘텐츠 -->
  <main style="flex: 1; padding: 32px; overflow-y: auto; background: #fff;">
    <!-- 피험자 정보 -->
    <section id="tab-patient" class="ecrf-tab-content">
      <h2>피험자 정보</h2>
      <table class="ecrf-form-table">
        <tr><td>등록번호</td><td><input type="text" /></td></tr>
        <tr><td>등록일자</td><td><input type="date" /></td></tr>
        <tr><td>성명</td><td><input type="text" /></td></tr>
        <tr><td>주민등록번호</td><td><input type="text" placeholder="000000-0000000" /></td></tr>
        <tr><td>생년월일</td><td><input type="date" /></td></tr>
        <tr><td>성별</td><td class="ecrf-radio-group"><label><input type="radio" name="gender" /> 남</label> <label><input type="radio" name="gender" /> 여</label></td></tr>
        <tr><td>입원일</td><td><input type="date" /></td></tr>
        <tr><td>나이</td><td><input type="number" /></td></tr>
        <tr><td>연락처</td><td><input type="text" placeholder="010-1234-5678" /></td></tr>
        <tr><td>주소</td><td><input type="text" /></td></tr>
        <tr><td>기존 질환</td><td><textarea placeholder="예: 고혈압, 당뇨 등"></textarea></td></tr>
        <tr><td>복용 중 약물</td><td><textarea></textarea></td></tr>
        <tr><td>알레르기</td><td><textarea></textarea></td></tr>
        <tr><td>가족력</td><td><textarea></textarea></td></tr>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>

    <!-- 수술 전 평가 -->
    <section id="tab-eval" class="ecrf-tab-content" style="display:none">
      <h2>수술 전 평가</h2>
      <table class="ecrf-lab-table">
        <thead><tr><th>No</th><th>항목</th><th>실시여부</th><th>시행일</th><th>결과</th><th>단위</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>WBC</td><td><label><input type="radio" name="wbc" />예</label><label><input type="radio" name="wbc" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>x10^3/µL</td></tr>
          <tr><td>2</td><td>Neutrophil</td><td><label><input type="radio" name="neu" />예</label><label><input type="radio" name="neu" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>%</td></tr>
          <tr><td>3</td><td>Lymphocyte</td><td><label><input type="radio" name="lym" />예</label><label><input type="radio" name="lym" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>%</td></tr>
          <tr><td>4</td><td>Hb</td><td><label><input type="radio" name="hb" />예</label><label><input type="radio" name="hb" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>g/dL</td></tr>
          <tr><td>5</td><td>PLT</td><td><label><input type="radio" name="plt" />예</label><label><input type="radio" name="plt" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>x10^3/µL</td></tr>
          <tr><td>6</td><td>AST</td><td><label><input type="radio" name="ast" />예</label><label><input type="radio" name="ast" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>U/L</td></tr>
          <tr><td>7</td><td>ALT</td><td><label><input type="radio" name="alt" />예</label><label><input type="radio" name="alt" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>U/L</td></tr>
          <tr><td>8</td><td>Creatinine</td><td><label><input type="radio" name="cr" />예</label><label><input type="radio" name="cr" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>mg/dL</td></tr>
          <tr><td>9</td><td>BUN</td><td><label><input type="radio" name="bun" />예</label><label><input type="radio" name="bun" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>mg/dL</td></tr>
          <tr><td>10</td><td>Na</td><td><label><input type="radio" name="na" />예</label><label><input type="radio" name="na" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>mmol/L</td></tr>
          <tr><td>11</td><td>K</td><td><label><input type="radio" name="k" />예</label><label><input type="radio" name="k" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>mmol/L</td></tr>
          <tr><td>12</td><td>Glucose</td><td><label><input type="radio" name="gluc" />예</label><label><input type="radio" name="gluc" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>mg/dL</td></tr>
          <tr><td>13</td><td>Albumin</td><td><label><input type="radio" name="alb" />예</label><label><input type="radio" name="alb" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>g/dL</td></tr>
          <tr><td>14</td><td>Total Protein</td><td><label><input type="radio" name="tp" />예</label><label><input type="radio" name="tp" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>g/dL</td></tr>
          <tr><td>15</td><td>PT</td><td><label><input type="radio" name="pt" />예</label><label><input type="radio" name="pt" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>sec</td></tr>
          <tr><td>16</td><td>APTT</td><td><label><input type="radio" name="aptt" />예</label><label><input type="radio" name="aptt" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>sec</td></tr>
          <tr><td>17</td><td>INR</td><td><label><input type="radio" name="inr" />예</label><label><input type="radio" name="inr" />아니오</label></td><td><input type="date" /></td><td><input type="number" /></td><td>-</td></tr>
        </tbody>
        </tbody>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>

    <!-- 수술 정보 -->
    <section id="tab-surgery" class="ecrf-tab-content" style="display:none">
      <h2>수술 정보</h2>
      <table class="ecrf-form-table">
         <tr><td>수술명</td><td><input type="text" /></td></tr>
        <tr><td>수술일</td><td><input type="date" /></td></tr>
        <tr><td>수술시간 (분)</td><td><input type="number" /></td></tr>
        <tr><td>수술 부위</td><td><input type="text" /></td></tr>
        <tr><td>마취방법</td><td><input type="text" /></td></tr>
        <tr><td>수술의사</td><td><input type="text" /></td></tr>
        <tr><td>보조의사</td><td><input type="text" /></td></tr>
        <tr><td>수술코드</td><td><input type="text" /></td></tr>
        <tr><td>출혈량 (mL)</td><td><input type="number" /></td></tr>
        <tr><td>수혈 여부</td><td class="ecrf-radio-group"><label><input type="radio" name="transfusion" /> 예</label> <label><input type="radio" name="transfusion" /> 아니오</label></td></tr>
        <tr><td>수술 중 합병증</td><td><textarea></textarea></td></tr>
        <tr><td>수술 전 항생제 투여</td><td class="ecrf-radio-group"><label><input type="radio" name="antibiotic" /> 예</label> <label><input type="radio" name="antibiotic" /> 아니오</label></td></tr>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>

    <!-- 수술 후 혈액검사 -->
    <section id="tab-lab" class="ecrf-tab-content" style="display:none">
      <h2>수술 후 혈액검사</h2>
      <table class="ecrf-lab-table">
        <thead><tr><th>항목</th><th>수치</th><th>단위</th><th>검사일</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Hb</td><td><input type="number" /></td><td>g/dL</td><td><input type="date" /></td></tr>
          <tr><td>2</td><td>WBC</td><td><input type="number" /></td><td>x10^3/µL</td><td><input type="date" /></td></tr>
          <tr><td>3</td><td>CRP</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>4</td><td>AST</td><td><input type="number" /></td><td>U/L</td><td><input type="date" /></td></tr>
          <tr><td>5</td><td>ALT</td><td><input type="number" /></td><td>U/L</td><td><input type="date" /></td></tr>
          <tr><td>6</td><td>Creatinine</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>7</td><td>Glucose</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>8</td><td>Albumin</td><td><input type="number" /></td><td>g/dL</td><td><input type="date" /></td></tr>
          <tr><td>9</td><td>INR</td><td><input type="number" /></td><td>-</td><td><input type="date" /></td></tr>
          <tr><td>10</td><td>LDH</td><td><input type="number" /></td><td>U/L</td><td><input type="date" /></td></tr>
          <tr><td>11</td><td>Total Protein</td><td><input type="number" /></td><td>g/dL</td><td><input type="date" /></td></tr>
          <tr><td>12</td><td>Total Bilirubin</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>13</td><td>Direct Bilirubin</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>14</td><td>BUN</td><td><input type="number" /></td><td>mg/dL</td><td><input type="date" /></td></tr>
          <tr><td>15</td><td>Na</td><td><input type="number" /></td><td>mmol/L</td><td><input type="date" /></td></tr>
          <tr><td>16</td><td>K</td><td><input type="number" /></td><td>mmol/L</td><td><input type="date" /></td></tr>
          <tr><td>17</td><td>Platelet</td><td><input type="number" /></td><td>x10^3/µL</td><td><input type="date" /></td></tr>
          <tr><td>18</td><td>APTT</td><td><input type="number" /></td><td>sec</td><td><input type="date" /></td></tr>
          <tr><td>19</td><td>PT</td><td><input type="number" /></td><td>sec</td><td><input type="date" /></td></tr>
          <tr><td>20</td><td>ESR</td><td><input type="number" /></td><td>mm/hr</td><td><input type="date" /></td></tr>
        </tbody>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>

    <!-- 합병증 -->
    <section id="tab-complication" class="ecrf-tab-content" style="display:none">
      <h2>합병증</h2>
      <table class="ecrf-form-table">
        <tr><td>합병증 유무</td><td><label><input type="radio" name="comp" /> 있음</label><label><input type="radio" name="comp" /> 없음</label></td></tr>
        <tr><td>합병증 종류</td><td><input type="text" placeholder="콤마로 구분 입력"></td></tr>
        <tr><td>발생일</td><td><input type="date"></td></tr>
        <tr><td>조치사항</td><td><input type="text"></td></tr>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>

    <!-- 수술 후 경과 (깔끔한 개선 버전) -->
    <section id="tab-outcome" class="ecrf-tab-content" style="display:none">
      <h2>수술 후 경과</h2>
      <table class="ecrf-form-table">
        <tr>
          <td>퇴원일</td>
          <td><input type="date" /></td>
        </tr>
        <tr>
          <td>입원기간</td>
          <td><input type="number" placeholder="입원 일수" /> 일</td>
        </tr>
        <tr>
          <td>사망 여부</td>
          <td>
            <div class="ecrf-radio-group">
              <label><input type="radio" name="death" /> 생존</label>
              <label><input type="radio" name="death" /> 사망</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>사망일</td>
          <td><input type="date" /></td>
        </tr>
        <tr>
          <td>재입원 여부</td>
          <td>
            <div class="ecrf-radio-group">
              <label><input type="radio" name="readmit" /> 예</label>
              <label><input type="radio" name="readmit" /> 아니오</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>재수술 여부</td>
          <td>
            <div class="ecrf-radio-group">
              <label><input type="radio" name="reop" /> 예</label>
              <label><input type="radio" name="reop" /> 아니오</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>ICU 재입실 여부</td>
          <td>
            <div class="ecrf-radio-group">
              <label><input type="radio" name="reicu" /> 예</label>
              <label><input type="radio" name="reicu" /> 아니오</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>30일 이내 사망 여부</td>
          <td>
            <div class="ecrf-radio-group">
              <label><input type="radio" name="death30" /> 예</label>
              <label><input type="radio" name="death30" /> 아니오</label>
            </div>
          </td>
        </tr>
        <tr>
          <td>기타 경과사항</td>
          <td><textarea placeholder="특이사항 입력"></textarea></td>
        </tr>
      </table>
      <button class="ecrf-save-btn">저장</button>
    </section>
  </main>
</div>

<style>
.ecrf-tab-btn {
  background: none;
  border: none;
  text-align: left;
  padding: 12px 24px;
  font-size: 1.06em;
  cursor: pointer;
  color: #343A40;
  transition: background 0.2s;
}
.ecrf-tab-btn:hover {
  background: #e9ecef;
  color: #3A86FF;
  font-weight: 600;
}
.ecrf-tab-btn.active {
  background-color: #E0EDFF;
  color: #3A86FF;
  font-weight: 700;
  border-left: 4px solid #3A86FF;
  text-align: center;
  padding-left: 0px;
  padding-right: 0px;
}
.ecrf-tab-content input,
.ecrf-tab-content select,
.ecrf-tab-content textarea {
  width: 100%;
  padding: 8px 12px;
  font-size: 1em;
  border: 1px solid #ced4da;
  border-radius: 6px;
  box-sizing: border-box;
}
.ecrf-form-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 10px;
  margin-bottom: 20px;
}
.ecrf-form-table td {
  padding: 8px 12px;
  vertical-align: middle;
  font-size: 0.98em;
  color: #212529;
}
.ecrf-form-table td:first-child {
  width: 180px;
  font-weight: 600;
  color: #495057;
  text-align: right;
  padding-right: 18px;
}
.ecrf-radio-group label {
  display: inline-flex;
  align-items: center;
  margin-right: 24px;
  font-weight: 500;
  color: #343A40;
  font-size: 0.97em;
}
.ecrf-radio-group input[type="radio"] {
  margin-right: 6px;
  transform: scale(1.2);
}
.ecrf-lab-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
  font-size: 0.95em;
}
.ecrf-lab-table th {
  background: #f1f3f5;
  font-weight: bold;
  color: #495057;
}
.ecrf-lab-table th, .ecrf-lab-table td {
  border: 1px solid #dee2e6;
  padding: 10px;
  text-align: center;
}
.ecrf-save-btn {
  margin-top: 20px;
  background: #3A86FF;
  color: white;
  padding: 10px 20px;
  border: none;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.05em;
}
.ecrf-save-btn:hover {
  background: #0056b3;
}

</style>

<script>
document.querySelectorAll('.ecrf-tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.ecrf-tab-content').forEach(s => s.style.display = 'none');
    document.getElementById(btn.dataset.tab).style.display = 'block';
  });
});
</script>

